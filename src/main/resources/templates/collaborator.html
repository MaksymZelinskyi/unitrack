<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${collaborator.fullName}"></title>
    <th:block th:insert="fragments :: head"></th:block>
</head>
<body class="profile-body">

<div th:insert="fragments :: header"></div>

<main class="profile-main">

    <div class="content-split">
        <!-- Profile Card -->
        <section class="profile-card left-panel">
            <img
                    alt="Profile Picture" class="profile-avatar"
                    th:src="${#strings.isEmpty(collaborator.avatarUrl) ? '/icons/profile-icon.png' : collaborator.avatarUrl}"
            />

            <h1 class="profile-name" th:text="${collaborator.fullName}">John Doe</h1>
            <p class="profile-email" th:text="${collaborator.email}">john.doe@example.com</p>

            <div class="profile-badge-wrapper">
                <span class="profile-badge">Collaborator Profile</span>
            </div>
        </section>

        <!-- Right: Sidebar -->
        <aside class="right-sidebar">
            <label class="sidebar-title">Skills</label>
            <ul class="assignees-list">

                <li th:if="${skills == null || #lists.isEmpty(skills)}" class="empty-text">
                    No skills yet
                </li>

                <li th:each="skill : ${skills}">
                    <h3 th:text="${skill}"></h3>
                </li>
            </ul>
        </aside>
    </div>

    <!-- Projects Section -->
    <section class="projects-section">
        <h2 class="projects-title">Projects & Tasks</h2>

        <ul class="project-list three-columns">
            <li th:each="project : ${projects}" class="project-card" style="width: 90vw; height: 70vh;">
                <a th:href="@{/projects/{id}(id=${project.projectId})}">
                    <div class="project-header">
                        <h3 class="project-name" th:text="${project.title}">Project Name</h3>
                        <span class="project-meta" th:text="'Role: ' + ${project.role}">Role</span>
                        <span class="project-meta" th:text="'Tasks: ' + ${#lists.size(project.tasks)}">Tasks count</span>
                    </div>

                    <aside class="sidebar" style="height: 90%; width: 90%;">
                        <ul class="task-list">
                            <li th:each="task : ${project.tasks}"
                                class="task-card flex-col" style="width: 90%;"
                                th:classappend="${task.completed ? 'task-completed' : ''}">
                                <a th:href="@{/tasks/{id}(id=${task.id})}">
                                    <h4 class="task-title task-info-label" th:text="${task.title}">Task Title</h4>
                                    <div class="task-info">
                                        <p class="task-desc" th:text="${task.description}">Task description</p>
                                    </div>
                                    <div class="task-deadline">
                                        <span class="time-label">Deadline:</span>
                                        <span class="date" th:text="${#temporals.format(task.deadline, 'dd MMM yyyy HH:mm')}">2025-10-15</span>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </aside>
                </a>
            </li>
        </ul>
    </section>
</main>
</body>
</html>
